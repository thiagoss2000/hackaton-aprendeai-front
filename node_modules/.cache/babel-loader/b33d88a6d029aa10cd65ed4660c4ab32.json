{"ast":null,"code":"var _jsxFileName = \"/home/thiago/Documentos/desenvolvimento/aprende_ai/aprende_ai/src/components/MainPage.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Main, Theme } from \"../assets/mainStyled\";\nimport userImg from \"../icons/user.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MainPage() {\n  _s();\n\n  const URL = \"http://localhost:5000\";\n  const navigate = useNavigate();\n  const [products, setProducts] = useState([]);\n  const [numItens, setNumItens] = useState('');\n  const [selected, setSelected] = useState([]);\n  const [userMenu, setUserMenu] = useState(false);\n  const user_id = sessionStorage.user;\n  const token = sessionStorage.token;\n  useEffect(() => {\n    axios.get(`${URL}/products`, {\n      headers: {\n        'user': user_id\n      }\n    }).then(response => {\n      console.log(response.data.products);\n      setProducts(response.data.products);\n      if (response.data.qtd > 0) setNumItens(response.data.qtd);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [selected]);\n\n  function logout() {\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('token');\n  }\n\n  function selectedIten(id) {\n    const aux = [...selected];\n\n    if (aux.includes(id)) {\n      aux.splice(aux.indexOf(id), 1);\n      setSelected(aux);\n    } else {\n      aux.push(id);\n      setSelected(aux);\n    }\n  }\n\n  function sendThemes() {\n    if (!user_id) {\n      navigate(\"/\");\n      return;\n    }\n\n    axios.post(`${URL}/purchase`, selected, {\n      headers: {\n        'user': user_id,\n        'token': token\n      }\n    }).then(response => {\n      console.log(response);\n      setSelected([]);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  let itens = [];\n  selected.forEach(selec => {\n    products.forEach(el => {\n      if (el.id === selec) itens.push(el);\n    });\n  });\n\n  if (products.length === 0) {\n    console.log('loading...');\n  } else {\n    return /*#__PURE__*/_jsxDEV(Main, {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `MenuUser ${userMenu ? '' : 'displayNone'}`,\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            onClick: logout,\n            children: \"logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          onClick: () => setUserMenu(true),\n          className: \"icon\",\n          src: userImg,\n          alt: \"user\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Aprende ai\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: numItens\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Ol\\xE1, \", 'fulano']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"body\",\n        onClick: () => setUserMenu(false),\n        children: products.map(product => {\n          return /*#__PURE__*/_jsxDEV(Theme, {\n            color: '#252525',\n            className: \"products\",\n            onClick: () => selectedIten(product.id),\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: product.image,\n              alt: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"R$\", product.price.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: product.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 19\n            }, this)]\n          }, product.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(MainPage, \"lrvyYIxU7h4Yd1hhoRoJF9BdPGM=\", false, function () {\n  return [useNavigate];\n});\n\n_c = MainPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainPage\");","map":{"version":3,"names":["useEffect","useState","Link","useNavigate","axios","Main","Theme","userImg","MainPage","URL","navigate","products","setProducts","numItens","setNumItens","selected","setSelected","userMenu","setUserMenu","user_id","sessionStorage","user","token","get","headers","then","response","console","log","data","qtd","catch","err","logout","removeItem","selectedIten","id","aux","includes","splice","indexOf","push","sendThemes","post","itens","forEach","selec","el","length","map","product","image","name","price","toFixed","description"],"sources":["/home/thiago/Documentos/desenvolvimento/aprende_ai/aprende_ai/src/components/MainPage.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { Link, useNavigate } from \"react-router-dom\"\nimport axios from \"axios\"\n\nimport { Main, Theme } from \"../assets/mainStyled\"\n\nimport userImg from \"../icons/user.png\"\n\nexport default function MainPage() {\n  const URL = \"http://localhost:5000\"\n  const navigate = useNavigate();\n  const [products, setProducts] = useState([]);\n  const [numItens, setNumItens] = useState('');\n  const [selected, setSelected] = useState([]);\n  const [userMenu, setUserMenu] = useState(false);\n\n  const user_id = sessionStorage.user;\n  const token = sessionStorage.token;\n\n  useEffect(() => {\n    axios.get(`${URL}/products`, {headers: {'user': user_id}})\n    .then((response) => {\n      console.log(response.data.products);\n      setProducts(response.data.products);\n      if(response.data.qtd > 0)\n      setNumItens(response.data.qtd);\n    })\n    .catch((err) => {console.log(err);})\n  }, [selected]);\n  \n  function logout(){\n    sessionStorage.removeItem('user')\n    sessionStorage.removeItem('token')\n  }\n\n  function selectedIten(id){\n    const aux = [...selected];\n    if(aux.includes(id)){\n      aux.splice(aux.indexOf(id), 1);\n      setSelected(aux);\n    } else {\n      aux.push(id)\n      setSelected(aux);\n    }    \n  }\n\n  function sendThemes(){\n    if(!user_id){\n      navigate(\"/\");\n      return;\n    }\n    axios.post(`${URL}/purchase`, selected, {headers: {'user': user_id, 'token': token}})\n    .then((response) => {console.log(response); setSelected([])})\n    .catch((err) => {console.log(err)})\n  }\n\n  let itens = []\n  selected.forEach((selec) => {\n    products.forEach((el) => {\n        if(el.id === selec) itens.push(el);\n      })\n  })\n\n  if(products.length === 0){\n    console.log('loading...');\n  } else {\n    return (\n      <Main>\n        <header>\n          <div className={`MenuUser ${userMenu? '' : 'displayNone'}`}>\n            <h2 onClick={logout}>logout</h2>\n          </div>\n          <img onClick={() => setUserMenu(true)} className=\"icon\" src={userImg} alt=\"user\"></img>\n          <h1>Aprende ai</h1>\n          <p>{numItens}</p>\n          <h3>Ol√°, {'fulano'}</h3>\n        </header>\n        <div className=\"body\" onClick={() => setUserMenu(false)}>\n          {products.map((product) => {\n              return(\n                <Theme \n                  key={product.id} \n                  color={'#252525'}\n                  className=\"products\" \n                  onClick={() => selectedIten(product.id)}\n                >\n                  <img src={product.image} alt={product.name}></img>\n                  <h3>{product.name}</h3>\n                  <p>R${(product.price).toFixed(2)}</p>\n                  <p>{product.description}</p>\n                </Theme>\n              )\n          })}\n        </div>\n      </Main>\n    )\n  }\n}\n"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,IAAT,EAAeC,WAAf,QAAkC,kBAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,IAAT,EAAeC,KAAf,QAA4B,sBAA5B;AAEA,OAAOC,OAAP,MAAoB,mBAApB;;AAEA,eAAe,SAASC,QAAT,GAAoB;EAAA;;EACjC,MAAMC,GAAG,GAAG,uBAAZ;EACA,MAAMC,QAAQ,GAAGP,WAAW,EAA5B;EACA,MAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACY,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACc,QAAD,EAAWC,WAAX,IAA0Bf,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACgB,QAAD,EAAWC,WAAX,IAA0BjB,QAAQ,CAAC,KAAD,CAAxC;EAEA,MAAMkB,OAAO,GAAGC,cAAc,CAACC,IAA/B;EACA,MAAMC,KAAK,GAAGF,cAAc,CAACE,KAA7B;EAEAtB,SAAS,CAAC,MAAM;IACdI,KAAK,CAACmB,GAAN,CAAW,GAAEd,GAAI,WAAjB,EAA6B;MAACe,OAAO,EAAE;QAAC,QAAQL;MAAT;IAAV,CAA7B,EACCM,IADD,CACOC,QAAD,IAAc;MAClBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAAT,CAAclB,QAA1B;MACAC,WAAW,CAACc,QAAQ,CAACG,IAAT,CAAclB,QAAf,CAAX;MACA,IAAGe,QAAQ,CAACG,IAAT,CAAcC,GAAd,GAAoB,CAAvB,EACAhB,WAAW,CAACY,QAAQ,CAACG,IAAT,CAAcC,GAAf,CAAX;IACD,CAND,EAOCC,KAPD,CAOQC,GAAD,IAAS;MAACL,OAAO,CAACC,GAAR,CAAYI,GAAZ;IAAkB,CAPnC;EAQD,CATQ,EASN,CAACjB,QAAD,CATM,CAAT;;EAWA,SAASkB,MAAT,GAAiB;IACfb,cAAc,CAACc,UAAf,CAA0B,MAA1B;IACAd,cAAc,CAACc,UAAf,CAA0B,OAA1B;EACD;;EAED,SAASC,YAAT,CAAsBC,EAAtB,EAAyB;IACvB,MAAMC,GAAG,GAAG,CAAC,GAAGtB,QAAJ,CAAZ;;IACA,IAAGsB,GAAG,CAACC,QAAJ,CAAaF,EAAb,CAAH,EAAoB;MAClBC,GAAG,CAACE,MAAJ,CAAWF,GAAG,CAACG,OAAJ,CAAYJ,EAAZ,CAAX,EAA4B,CAA5B;MACApB,WAAW,CAACqB,GAAD,CAAX;IACD,CAHD,MAGO;MACLA,GAAG,CAACI,IAAJ,CAASL,EAAT;MACApB,WAAW,CAACqB,GAAD,CAAX;IACD;EACF;;EAED,SAASK,UAAT,GAAqB;IACnB,IAAG,CAACvB,OAAJ,EAAY;MACVT,QAAQ,CAAC,GAAD,CAAR;MACA;IACD;;IACDN,KAAK,CAACuC,IAAN,CAAY,GAAElC,GAAI,WAAlB,EAA8BM,QAA9B,EAAwC;MAACS,OAAO,EAAE;QAAC,QAAQL,OAAT;QAAkB,SAASG;MAA3B;IAAV,CAAxC,EACCG,IADD,CACOC,QAAD,IAAc;MAACC,OAAO,CAACC,GAAR,CAAYF,QAAZ;MAAuBV,WAAW,CAAC,EAAD,CAAX;IAAgB,CAD5D,EAECe,KAFD,CAEQC,GAAD,IAAS;MAACL,OAAO,CAACC,GAAR,CAAYI,GAAZ;IAAiB,CAFlC;EAGD;;EAED,IAAIY,KAAK,GAAG,EAAZ;EACA7B,QAAQ,CAAC8B,OAAT,CAAkBC,KAAD,IAAW;IAC1BnC,QAAQ,CAACkC,OAAT,CAAkBE,EAAD,IAAQ;MACrB,IAAGA,EAAE,CAACX,EAAH,KAAUU,KAAb,EAAoBF,KAAK,CAACH,IAAN,CAAWM,EAAX;IACrB,CAFH;EAGD,CAJD;;EAMA,IAAGpC,QAAQ,CAACqC,MAAT,KAAoB,CAAvB,EAAyB;IACvBrB,OAAO,CAACC,GAAR,CAAY,YAAZ;EACD,CAFD,MAEO;IACL,oBACE,QAAC,IAAD;MAAA,wBACE;QAAA,wBACE;UAAK,SAAS,EAAG,YAAWX,QAAQ,GAAE,EAAF,GAAO,aAAc,EAAzD;UAAA,uBACE;YAAI,OAAO,EAAEgB,MAAb;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QADF,eAIE;UAAK,OAAO,EAAE,MAAMf,WAAW,CAAC,IAAD,CAA/B;UAAuC,SAAS,EAAC,MAAjD;UAAwD,GAAG,EAAEX,OAA7D;UAAsE,GAAG,EAAC;QAA1E;UAAA;UAAA;UAAA;QAAA,QAJF,eAKE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QALF,eAME;UAAA,UAAIM;QAAJ;UAAA;UAAA;UAAA;QAAA,QANF,eAOE;UAAA,uBAAU,QAAV;QAAA;UAAA;UAAA;UAAA;QAAA,QAPF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAUE;QAAK,SAAS,EAAC,MAAf;QAAsB,OAAO,EAAE,MAAMK,WAAW,CAAC,KAAD,CAAhD;QAAA,UACGP,QAAQ,CAACsC,GAAT,CAAcC,OAAD,IAAa;UACvB,oBACE,QAAC,KAAD;YAEE,KAAK,EAAE,SAFT;YAGE,SAAS,EAAC,UAHZ;YAIE,OAAO,EAAE,MAAMf,YAAY,CAACe,OAAO,CAACd,EAAT,CAJ7B;YAAA,wBAME;cAAK,GAAG,EAAEc,OAAO,CAACC,KAAlB;cAAyB,GAAG,EAAED,OAAO,CAACE;YAAtC;cAAA;cAAA;cAAA;YAAA,QANF,eAOE;cAAA,UAAKF,OAAO,CAACE;YAAb;cAAA;cAAA;cAAA;YAAA,QAPF,eAQE;cAAA,iBAAOF,OAAO,CAACG,KAAT,CAAgBC,OAAhB,CAAwB,CAAxB,CAAN;YAAA;cAAA;cAAA;cAAA;YAAA,QARF,eASE;cAAA,UAAIJ,OAAO,CAACK;YAAZ;cAAA;cAAA;cAAA;YAAA,QATF;UAAA,GACOL,OAAO,CAACd,EADf;YAAA;YAAA;YAAA;UAAA,QADF;QAaH,CAdA;MADH;QAAA;QAAA;QAAA;MAAA,QAVF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EA8BD;AACF;;GAzFuB5B,Q;UAELL,W;;;KAFKK,Q"},"metadata":{},"sourceType":"module"}